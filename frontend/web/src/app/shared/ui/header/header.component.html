<mat-toolbar class="bar" role="navigation">
  <!-- Marca -->
  <a routerLink="/" class="brand" aria-label="LaMorada">
    <mat-icon fontIcon="home"></mat-icon>
    <span>LaMorada</span>
  </a>

  <!-- Navegación -->
  <nav class="nav">
    <a routerLink="/dashboard" routerLinkActive="active">Dashboard</a>
    <a routerLink="/users" routerLinkActive="active">Usuarios</a>
    <a routerLink="/roles" routerLinkActive="active">Roles</a>
    <a routerLink="/appointments" routerLinkActive="active">Citas</a>
    <a routerLink="/availability" routerLinkActive="active">Disponibilidad</a>
    <a routerLink="/ebooks" routerLinkActive="active">Ebooks</a>
    <a routerLink="/tienda" routerLinkActive="active">Tienda</a>
    <a routerLink="/professionals" routerLinkActive="active">Profesionales</a>
    <a routerLink="/podcasts" routerLinkActive="active">Podcasts</a>
    <a routerLink="/blog" routerLinkActive="active">Blog</a>

    <!-- Solo psicólogo ve Métricas -->
    <a *ngIf="user()?.role === 'psicologo'" routerLink="/metrics-lite" routerLinkActive="active"
      >Métricas</a
    >
  </nav>

  <!-- Acciones (lado derecho) -->
  <div class="actions">
    <!-- Botones de creación para psicólogo o admin -->
    <ng-container *ngIf="user()?.role === 'psicologo' || user()?.role === 'admin'">
      <a class="pill pill-outline" routerLink="/podcasts/new">Publicar episodio</a>
      <a class="pill pill-outline" routerLink="/blog/new">Nueva publicación</a>
    </ng-container>

    <!-- Sesión -->
    <ng-container *ngIf="user() as u; else guest">
      <span class="user">{{ u.name || u.email }} · {{ roleLabel(u.role) }}</span>
      <button class="pill pill-outline" type="button" (click)="logout()">Salir</button>
    </ng-container>

    <ng-template #guest>
      <a class="pill pill-outline" routerLink="/login">Ingresar</a>
    </ng-template>
  </div>
</mat-toolbar>
